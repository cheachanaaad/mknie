<!doctype html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>μ •ν†µ AI κ΄€μƒν•™μ - 30λ…„ κ²½λ ¥μ νμ•</title>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm/vision_bundle.js" crossorigin="anonymous"></script>
</head>

<body>
  <audio id="scrollSound" src="/scroll_sound.mp3" preload="auto"></audio>

  <main>
    <form id="physiognomyForm">
      <header>
        <div class="title-container">
          <img src="/title_calligraphy_v2.png" class="title-image" alt="κ΄€μƒ">
          <img src="/title_decoration.png" class="title-decoration" alt="μ¥μ‹">
        </div>
        <p class="header-desc">δΈ‰εεΉ΄ η¶“λ ¥ νμ•μΌλ΅ λ‹Ήμ‹ μ κΈΈν‰ν™”λ³µμ„ μ‚΄ν•λ‹λ‹¤.</p>
        
        <div class="action-area">
          <button type="submit" class="seal-button">λ¶„μ„μ”μ²­</button>
        </div>
      </header>

      <!-- μ‚¬μ§„ μ—…λ΅λ“ λ‘λ£¨λ§λ¦¬ (λ””μμΈ μ™„μ „ μ μ§€) -->
      <div class="scroll-wrapper open">
        <img src="/scroll_top.png" class="scroll-img-top" alt="λ‘λ£¨λ§λ¦¬ μƒλ‹¨">
        <div class="scroll-body">
          <div class="scroll-content">
            <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
              <!-- μ •λ©΄ μ‚¬μ§„ μ¬λ΅― -->
              <div class="upload-area" onclick="document.getElementById('imageInputFront').click()" style="flex: 1; min-width: 200px;">
                <input type="file" id="imageInputFront" accept="image/*" style="display:none">
                <div id="uploadPlaceholderFront">
                  <p style="font-size: 2rem; margin: 0;">π“</p>
                  <p style="font-weight: 900;">μ •λ©΄ μ‚¬μ§„</p>
                </div>
                <img id="imagePreviewFront" src="" style="max-width: 100%; display: none; border: 5px solid #fff;">
              </div>
              
              <!-- λ€κ°μ„  μ‚¬μ§„ μ¬λ΅― -->
              <div class="upload-area" onclick="document.getElementById('imageInputDiag').click()" style="flex: 1; min-width: 200px;">
                <input type="file" id="imageInputDiag" accept="image/*" style="display:none">
                <div id="uploadPlaceholderDiag">
                  <p style="font-size: 2rem; margin: 0;">π“</p>
                  <p style="font-weight: 900;">λ€κ°μ„  μ‚¬μ§„</p>
                </div>
                <img id="imagePreviewDiag" src="" style="max-width: 100%; display: none; border: 5px solid #fff;">
              </div>
            </div>
          </div>
        </div>
        <img src="/scroll_bottom.png" class="scroll-img-bottom" alt="λ‘λ£¨λ§λ¦¬ ν•λ‹¨">
      </div>
    </form>

    <!-- λ¶„μ„ μ¤‘ νμ—… (λ””μμΈ μ™„μ „ μ μ§€) -->
    <div id="loadingOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.8); z-index: 1000; align-items: center; justify-content: center;">
      <div style="text-align: center; background: #ffffff; padding: 40px; border: 3px solid #a08c6d; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.2);">
        <p style="font-size: 2.2rem; font-weight: 900; color: #333; margin-bottom: 25px; letter-spacing: 3px; font-family: 'Noto Serif KR', serif;">λ¶„μ„μ¤‘..</p>
        <img id="loadingAnimation" src="/animation_frames/frame_0000.png" alt="λ¶„μ„μ¤‘" style="width: 280px; max-width: 90%;">
      </div>
    </div>

    <!-- κ²°κ³Ό μ°½ -->
    <div id="finalResult" style="display: none; width: 90%; max-width: 800px; margin: 40px auto; padding: 40px; background: rgba(10, 7, 5, 0.85); border: 2px solid #c5a059; border-radius: 15px; color: #fff;">
      <div class="output"></div>
      <div id="aiImageSection" style="display: none; margin-top: 30px; text-align: center;">
        <div class="image-frame" style="border: 10px solid #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.5);"><img id="generatedImage" src="" style="width: 100%;"></div>
      </div>
    </div>
  </main>

  <!-- λ‚΄λ¶€ λ¶„μ„μ© μ¨κ²¨μ§„ μΊ”λ²„μ¤ -->
  <canvas id="hiddenCanvasFront" style="display: none;"></canvas>
  <canvas id="hiddenCanvasDiag" style="display: none;"></canvas>

  <script type="module" src="/main.js"></script>
</body>

</html>